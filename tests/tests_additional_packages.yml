---
- name: Verify default packages as well as additional are installed
  hosts: all
  vars:
    additional_package: >-
      {{
        "openssh-keycat" if ansible_facts['os_family'] == 'RedHat'
        else "openssh-tests"
      }}
  tasks:
    - name: Run role
      include_role:
        name: linux-system-roles.ssh
      vars:
        ssh_additional_packages:
          - "{{ additional_package }}"

    - name: Gather the package facts
      package_facts:

    - name: Verify the packages were installed
      assert:
        that:
          - "'{{ additional_package }}' in ansible_facts.packages"
